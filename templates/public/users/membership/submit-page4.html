{% extends 'public/users/membership/base-registration.html' %}
{% load static %}
{% block steps %}
<form id="membership-page3" enctype="multipart/form-data">
    {% csrf_token %}

    <div class="wizard-step" id="step-4">
        <!-- Success Message -->
        <div class="mt-5 text-center" id="registration-success">
            <div class="congrats-card d-inline-block p-4 rounded shadow-sm bg-white">
                <img src="/static/assets/images/gif/success/successful.gif" alt="Success" style="max-width:140px;" class="mb-3 fade-pop">
                <h4 class="mt-2 fw-bold glow-text">Congratulations! Payment is under review.</h4>
                <h5 class="mt-2 text-muted">Your membership submission is on its way.</h5>
                <p class="mt-3">
                    Reference number:
                    <span class="fw-semibold" id="success-reference-no">{{ reference_no|default_if_none:"" }}</span>
                </p>
                <a href="{% url 'my_dashboard' %}" class="btn btn-primary mt-2">Go to Dashboard</a>
            </div>
        </div>

    </div>
</form>

<style>
.congrats-card {
    animation: fadeSlide 0.8s ease-out;
}
.fade-pop {
    animation: popIn 1s ease-out;
}
.glow-text {
    animation: pulseGlow 1.6s ease-in-out infinite;
}
@keyframes fadeSlide {
    from { opacity: 0; transform: translateY(14px); }
    to { opacity: 1; transform: translateY(0); }
}
@keyframes popIn {
    0% { transform: scale(0.85); opacity: 0; }
    60% { transform: scale(1.05); opacity: 1; }
    100% { transform: scale(1); }
}
@keyframes pulseGlow {
    0%, 100% { text-shadow: 0 0 0 rgba(59,130,246,0.0); }
    50% { text-shadow: 0 0 12px rgba(59,130,246,0.35); }
}
</style>

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', () => {
    const el = document.getElementById('success-reference-no');
    if (!el) return;
    const fromContext = el.textContent.trim();
    if (fromContext) return;
    const stored = sessionStorage.getItem('membership_success_reference') || '';
    if (stored) {
        el.textContent = stored;
    }
});
</script>
{% endblock %}
{% endblock %}
